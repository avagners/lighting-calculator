# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–∫—Ä—ã—Ç–æ —Ç–µ—Å—Ç–∞–º–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **Vitest** –∏ **React Testing Library**.

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤**: 118
- **–§–∞–π–ª–æ–≤ —Ç–µ—Å—Ç–æ–≤**: 5
- **–ü–æ–∫—Ä—ã—Ç–∏–µ**: –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞, —Ö—É–∫–∏, UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

## üöÄ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
npm run test

# –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ watch (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤)
npm run test -- --watch

# –ó–∞–ø—É—Å–∫ —Å UI –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
npm run test:ui

# –ó–∞–ø—É—Å–∫ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º (coverage)
npm run test:coverage

# –û–¥–Ω–æ–∫—Ä–∞—Ç–Ω—ã–π –∑–∞–ø—É—Å–∫ (–¥–ª—è CI/CD)
npm run test:run
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

```
src/tests/
‚îú‚îÄ‚îÄ setup.ts                      # Setup —Ñ–∞–π–ª (–º–æ–∫–∏, –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
‚îú‚îÄ‚îÄ lighting-calculator.test.ts   # –¢–µ—Å—Ç—ã —É—Ç–∏–ª–∏—Ç —Ä–∞—Å—á–µ—Ç–∞
‚îú‚îÄ‚îÄ useLightingCalculator.test.ts # –¢–µ—Å—Ç—ã —Ö—É–∫–∞
‚îú‚îÄ‚îÄ ui-components.test.tsx        # –¢–µ—Å—Ç—ã UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
‚îú‚îÄ‚îÄ calculator-components.test.tsx# –¢–µ—Å—Ç—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞
‚îî‚îÄ‚îÄ types.test.ts                 # –¢–µ—Å—Ç—ã —Ç–∏–ø–æ–≤ –∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç
```

## üß™ –ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è

### 1. `lighting-calculator.test.ts` (30 —Ç–µ—Å—Ç–æ–≤)

–¢–µ—Å—Ç—ã –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ —Ä–∞—Å—á–µ—Ç–∞ –æ—Å–≤–µ—â–µ–Ω–Ω–æ—Å—Ç–∏:

- `calculateArea` ‚Äî —Ä–∞—Å—á–µ—Ç –ø–ª–æ—â–∞–¥–∏ –ø–æ–º–µ—â–µ–Ω–∏—è
- `calculateMountingHeight` ‚Äî –≤—ã—Å–æ—Ç–∞ –ø–æ–¥–≤–µ—Å–∞ —Å–≤–µ—Ç–∏–ª—å–Ω–∏–∫–æ–≤
- `calculateRoomIndex` ‚Äî –∏–Ω–¥–µ–∫—Å –ø–æ–º–µ—â–µ–Ω–∏—è
- `calculateUtilizationFactor` ‚Äî –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- `calculateRequiredLumens` ‚Äî –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π —Å–≤–µ—Ç–æ–≤–æ–π –ø–æ—Ç–æ–∫
- `calculateNumberOfFixtures` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–≤–µ—Ç–∏–ª—å–Ω–∏–∫–æ–≤
- `calculateBulbWattage` ‚Äî –º–æ—â–Ω–æ—Å—Ç—å –ª–∞–º–ø—ã
- `getBulbLumens` ‚Äî —Å–≤–µ—Ç–æ–≤–æ–π –ø–æ—Ç–æ–∫ –ª–∞–º–ø—ã
- `findNearestStandardWattage` ‚Äî –ø–æ–¥–±–æ—Ä —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –º–æ—â–Ω–æ—Å—Ç–∏
- `performFullCalculation` ‚Äî –ø–æ–ª–Ω—ã–π —Ä–∞—Å—á–µ—Ç
- `calculateOptimalFixtureLayout` ‚Äî —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ —Å–≤–µ—Ç–∏–ª—å–Ω–∏–∫–æ–≤

### 2. `useLightingCalculator.test.ts` (14 —Ç–µ—Å—Ç–æ–≤)

–¢–µ—Å—Ç—ã —Ö—É–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º:

- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —á–µ—Ä–µ–∑ `updateState`
- –†–∞—Å—á–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è shareable URL
- –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage
- –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ localStorage
- –°–±—Ä–æ—Å –∫ –∑–Ω–∞—á–µ–Ω–∏—è–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

### 3. `ui-components.test.tsx` (35 —Ç–µ—Å—Ç–æ–≤)

–¢–µ—Å—Ç—ã –±–∞–∑–æ–≤—ã—Ö UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

**Card:**
- –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –¥–µ—Ç–µ–π
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ glass —ç—Ñ—Ñ–µ–∫—Ç–∞
- –í–∞—Ä–∏–∞–Ω—Ç—ã —Å–≤–µ—á–µ–Ω–∏—è (glow-warm, glow-cool)

**Button:**
- –ö–ª–∏–∫ –∏ onClick
- –í–∞—Ä–∏–∞–Ω—Ç—ã (primary, secondary, ghost)
- –†–∞–∑–º–µ—Ä—ã (sm, md, lg)

**Input:**
- Label, suffix, error
- –ü–µ—Ä–µ–¥–∞—á–∞ value –∏ onChange
- –ß–∏—Å–ª–æ–≤–æ–π —Ç–∏–ø

**Slider:**
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è
- onChange –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏
- –í–∞—Ä–∏–∞–Ω—Ç—ã glow (warm, cool)

**Select:**
- Dropdown variant
- Cards variant
- Chips variant
- Description –¥–ª—è –æ–ø—Ü–∏–π

**ColorPicker:**
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ü–≤–µ—Ç–æ–≤
- –í—ã–±–æ—Ä —Ü–≤–µ—Ç–∞
- Variants (circles, squares)

### 4. `calculator-components.test.tsx` (12 —Ç–µ—Å—Ç–æ–≤)

–¢–µ—Å—Ç—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞:

**RoomDimensionsForm:**
- –ü–æ–ª—è –¥–ª–∏–Ω—ã –∏ —à–∏—Ä–∏–Ω—ã
- –°–ª–∞–π–¥–µ—Ä—ã –≤—ã—Å–æ—Ç—ã

**BulbTypeSelector:**
- –°–µ–ª–µ–∫—Ç —Ç–∏–ø–∞ –ª–∞–º–ø
- LED –æ–ø—Ü–∏–∏
- –°–ª–∞–π–¥–µ—Ä –º–æ—â–Ω–æ—Å—Ç–∏

**SurfaceColorsForm:**
- –ü–∏–∫–µ—Ä—ã –¥–ª—è –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–µ–π
- –¶–≤–µ—Ç–æ–≤—ã–µ –æ–ø—Ü–∏–∏
- –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –æ—Ç—Ä–∞–∂–µ–Ω–∏—è

### 5. `types.test.ts` (27 —Ç–µ—Å—Ç–æ–≤)

–¢–µ—Å—Ç—ã —Ç–∏–ø–æ–≤ –∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç:

**ROOM_TYPES:**
- –ù–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –ø–æ–º–µ—â–µ–Ω–∏–π
- –ù–æ—Ä–º—ã –æ—Å–≤–µ—â–µ–Ω–Ω–æ—Å—Ç–∏ (–ª—é–∫—Å)
- –¶–≤–µ—Ç–æ–≤—ã–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã
- –ê–∫—Ü–µ–Ω—Ç–Ω—ã–µ —Ü–≤–µ—Ç–∞

**BULB_TYPES:**
- –¢–∏–ø—ã –ª–∞–º–ø
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (–ª–º/–í—Ç)
- –¶–≤–µ—Ç–æ–≤—ã–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã

**SURFACE_COLORS:**
- –¶–≤–µ—Ç–∞ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–µ–π
- –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –æ—Ç—Ä–∞–∂–µ–Ω–∏—è
- –ü–æ—Ä—è–¥–æ–∫ —É–±—ã–≤–∞–Ω–∏—è

**STANDARD_BULB_WATTAGES:**
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –º–æ—â–Ω–æ—Å—Ç–∏
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
- –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è

## üîß –ú–æ–∫–∏

–í `setup.ts` –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –º–æ–∫–∏ –¥–ª—è:

- **localStorage** ‚Äî –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
- **window.location** ‚Äî –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è URL
- **navigator.clipboard** ‚Äî –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
- **requestAnimationFrame** ‚Äî –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–π

## üìù –ü—Ä–∏–º–µ—Ä—ã —Ç–µ—Å—Ç–æ–≤

### –¢–µ—Å—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏

```typescript
it('–¥–æ–ª–∂–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å –ø–ª–æ—â–∞–¥—å –∫–æ–º–Ω–∞—Ç—ã', () => {
  expect(calculateArea(4, 3)).toBe(12);
  expect(calculateArea(5, 5)).toBe(25);
  expect(calculateArea(3.5, 2.5)).toBe(8.75);
});
```

### –¢–µ—Å—Ç —Ö—É–∫–∞

```typescript
it('–¥–æ–ª–∂–µ–Ω –æ–±–Ω–æ–≤–ª—è—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ —á–µ—Ä–µ–∑ updateState', () => {
  const { result } = renderHook(() => useLightingCalculator());

  act(() => {
    result.current.updateState('length', 5);
  });

  expect(result.current.state.length).toBe(5);
  expect(result.current.result?.area).toBe(15); // 5 * 3
});
```

### –¢–µ—Å—Ç UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

```typescript
it('–¥–æ–ª–∂–µ–Ω –≤—ã–∑—ã–≤–∞—Ç—å onChange –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Ü–≤–µ—Ç', () => {
  const handleChange = vi.fn();
  render(
    <ColorPicker 
      value="white" 
      options={colorOptions} 
      onChange={handleChange} 
    />
  );
  
  const beigeButton = screen.getByTitle('Beige');
  fireEvent.click(beigeButton);
  expect(handleChange).toHaveBeenCalledWith('beige');
});
```

## üéØ Best Practices

1. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–≤–µ–¥–µ–Ω–∏—è, –∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏** ‚Äî —Ç–µ—Å—Ç–∏—Ä—É–µ–º —á—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –∞ –Ω–µ –∫–∞–∫
2. **–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ–º `getByLabelText`, `getByRole` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ a11y
3. **–ò–∑–æ–ª—è—Ü–∏—è —Ç–µ—Å—Ç–æ–≤** ‚Äî –∫–∞–∂–¥—ã–π —Ç–µ—Å—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º, –∏—Å–ø–æ–ª—å–∑—É–µ–º `cleanup`
4. **–ú–æ–∫–∏ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** ‚Äî localStorage, clipboard, location
5. **–û–ø–∏—Å–∞—Ç–µ–ª—å–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤** ‚Äî –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ –¥–ª—è —è—Å–Ω–æ—Å—Ç–∏

## üîç –ü–æ–∫—Ä—ã—Ç–∏–µ (Coverage)

–î–ª—è –∑–∞–ø—É—Å–∫–∞ —Å –æ—Ç—á–µ—Ç–æ–º –æ –ø–æ–∫—Ä—ã—Ç–∏–∏:

```bash
npm run test:coverage
```

–û—Ç—á–µ—Ç –ø–æ—è–≤–∏—Ç—Å—è –≤ –ø–∞–ø–∫–µ `coverage/`.

## üé® UI Mode

–î–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ç–µ—Å—Ç–æ–≤:

```bash
npm run test:ui
```

–û—Ç–∫—Ä–æ–µ—Ç—Å—è –±—Ä–∞—É–∑–µ—Ä —Å UI Vitest, –≥–¥–µ –º–æ–∂–Ω–æ:
- –ó–∞–ø—É—Å–∫–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã
- –°–º–æ—Ç—Ä–µ—Ç—å –æ—à–∏–±–∫–∏ –∏ stack trace
- –§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ –∏–º–µ–Ω–∏

## üìà –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤

1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `*.test.ts` –∏–ª–∏ `*.test.tsx` –≤ –ø–∞–ø–∫–µ `src/tests/`
2. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ `describe`, `it`, `expect` –∏–∑ `vitest`
3. –î–ª—è React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ `render`, `screen`, `fireEvent` –∏–∑ `@testing-library/react`
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã: `npm run test`

–ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:

```typescript
import { describe, it, expect, vi } from 'vitest';
import { render, screen } from '@testing-library/react';
import { MyComponent } from '../components/MyComponent';

describe('MyComponent', () => {
  it('–¥–æ–ª–∂–µ–Ω —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è', () => {
    render(<MyComponent />);
    expect(screen.getByText('Hello')).toBeInTheDocument();
  });
});
```

## üêõ –û—Ç–ª–∞–¥–∫–∞ —Ç–µ—Å—Ç–æ–≤

–î–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:

```bash
# –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
npm run test -- lighting-calculator.test.ts

# –ó–∞–ø—É—Å–∫ –ø–æ –∏–º–µ–Ω–∏ —Ç–µ—Å—Ç–∞
npm run test -- -t "–¥–æ–ª–∂–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å"

# –° –≤—ã–≤–æ–¥–æ–º –ª–æ–≥–æ–≤
npm run test -- --reporter=verbose
```

## üìö –†–µ—Å—É—Ä—Å—ã

- [Vitest Documentation](https://vitest.dev/)
- [Testing Library](https://testing-library.com/)
- [React Testing Library](https://testing-library.com/docs/react-testing-library/intro/)
